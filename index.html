<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Homebridge LLM Control</title>
    <meta
      name="description"
      content="Chat with Homebridge using an LLM: control what Homebridge already exposes, schedule actions, monitor health, and run guardrailed skills."
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="wrap">
      <div class="header">
        <h1>Homebridge LLM Control</h1>
        <div class="tagline">An LLM chat control plane for Homebridge (no Home app automations required)</div>
      </div>

      <div class="nav">
        <a href="#what">What</a>
        <span class="sep">|</span>
        <a href="#setup">Setup</a>
        <span class="sep">|</span>
        <a href="#talk">Talk To It</a>
        <span class="sep">|</span>
        <a href="#recipes">Recipes</a>
        <span class="sep">|</span>
        <a href="#links">Links</a>
      </div>

      <div class="box">
        <h2 id="what">What This Plugin Does</h2>

        <ul>
          <li>Lets you message Homebridge like a person and get things done</li>
          <li>Controls what Homebridge already exposes (lights, switches, outlets, etc.)</li>
          <li>Schedules one-shot actions (like “turn off all lights in 30 minutes”)</li>
          <li>Runs health checks, daily monitoring, and watchdog investigations</li>
          <li>Can run guardrailed “skills” (approved shell commands) when needed</li>
          <li>Chat options: ntfy + Telegram (two-way) and Discord webhook (notifications)</li>
        </ul>

        <div class="note">
          <strong>btw:</strong> this plugin can only control devices that are <em>present in Homebridge</em>. If
          something only exists in the iOS Home app (native HomeKit) and is not exposed through a Homebridge plugin, it
          will not appear here.
        </div>

        <div class="note">
          If your “real” devices live only in HomeKit, you can add a HomeKit-to-Homebridge bridge.
          One option: <a href="https://github.com/minamoanes/homebridge-homekit-control">homebridge-homekit-control</a>
          (use carefully: importing devices can create duplicates and can confuse your Home app if you already have the
          same devices bridged elsewhere).
        </div>
      </div>

      <div class="box">
        <h2 id="setup">Setup (Fast)</h2>

        <p>
          Install the plugin, pick a chat channel, restart Homebridge, then talk to it. That’s it.
        </p>

        <ul>
          <li><strong>ntfy (recommended):</strong> enable ntfy, restart, subscribe to the topic shown in <code>/status</code></li>
          <li><strong>Telegram:</strong> create a bot token, enable Telegram, restart, message the bot</li>
          <li><strong>Discord webhook:</strong> paste webhook URL for notifications (not interactive chat)</li>
        </ul>

        <p class="small">
          First message after a restart should be: “Hey it’s set up. Homebridge LLM Control is online.”
        </p>
      </div>

      <div class="box">
        <h2 id="talk">Talk To It (Natural Language)</h2>

        <p>These are good first messages to send:</p>

        <pre><code>What devices can you control right now?
Turn off all the lights.
Turn on all the lights at 30% brightness.
Turn off everything in 30 minutes.

Is Homebridge healthy? Anything broken?
What changed in the logs today?</code></pre>

        <h3>If You Like Commands</h3>
        <pre><code>/help
/status

/hb list
/hb on lights
/hb off lights
/hb schedule 30m off lights

/health
/watchdog</code></pre>

        <h3>Common “Why Can’t You See My Devices?”</h3>
        <ul>
          <li>If <code>/hb list</code> looks empty, it’s not an LLM problem: Homebridge itself isn’t exposing those devices.</li>
          <li>Fix is to add/configure the right Homebridge plugins so the devices show up in Homebridge.</li>
          <li>If those devices are only in HomeKit, see the HomeKit import option above.</li>
        </ul>
      </div>

      <div class="box">
        <h2 id="recipes">Recipes (Useful Stuff)</h2>

        <h3>One-Shot Schedules</h3>
        <pre><code>Turn off all the lights in 20 minutes.
Restart Homebridge in 2 hours.</code></pre>

        <h3>Recurring Automations (LLM-Driven)</h3>
        <p class="small">
          Runtime automations live inside this plugin. They are cron-based and can be created/removed in chat.
        </p>
        <pre><code>/automation list
/automation add Nightly lights off | 0 1 * * * | Turn off all lights and switches.
/automation add Morning check | 0 8 * * * | Give me a short health report and highlight anything unusual.
/automation toggle &lt;id&gt; off
/automation remove &lt;id&gt;</code></pre>

        <h3>Daily Monitoring + Watchdog</h3>
        <pre><code>Enable daily monitoring at 9:00am.
Enable the watchdog. If there is a critical error, investigate and notify me.</code></pre>
        <pre><code>/config set monitoring.dailyMonitoringEnabled true
/config set monitoring.dailyMonitoringTime 09:00
/config set watchdog.enabled true</code></pre>

        <h3>“Restart Homebridge Every 12 Hours”</h3>
        <pre><code>Restart Homebridge every 12 hours and notify me when it restarts.</code></pre>
        <pre><code>/config set operations.scheduledRestartEnabled true
/config set operations.restartEveryHours 12
/config set operations.notifyOnHomebridgeRestart true</code></pre>

        <h3>One-Off Scripts (Guardrailed Skills)</h3>
        <p class="small">
          Skills are approved shell commands. They’re how you do powerful one-offs without giving an LLM unlimited shell
          access.
        </p>
        <pre><code>/skills
/skill propose Restart Homebridge | sudo hb-service restart | 60
/skill pending
/skill approve &lt;proposalId&gt; yes
/run &lt;skillId&gt;</code></pre>

        <div class="note">
          Safety: skills run only from an allowlist, with cooldowns/quotas. Your chat token is effectively admin access.
        </div>
      </div>

      <div class="box">
        <h2 id="links">Links</h2>
        <ul>
          <li>GitHub repo: <a href="https://github.com/theos2node/homebridge-llm-control">theos2node/homebridge-llm-control</a></li>
          <li>npm package: <a href="https://www.npmjs.com/package/homebridge-llm-control">homebridge-llm-control</a></li>
          <li>HomeKit import (optional): <a href="https://github.com/minamoanes/homebridge-homekit-control">minamoanes/homebridge-homekit-control</a></li>
        </ul>
      </div>

      <div class="footer">
        <div class="small">
          MIT licensed. This page is intentionally simple. Full docs live in the repo README.
        </div>
      </div>
    </div>
  </body>
</html>
