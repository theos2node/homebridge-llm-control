<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Homebridge LLM Control</title>
    <meta
      name="description"
      content="Chat + LLM operations for Homebridge: control existing accessories, schedule actions, monitor health, and run guardrailed self-healing skills."
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="wrap">
      <div class="header">
        <h1>Homebridge LLM Control</h1>
        <div class="tagline">Chat + LLM operations for Homebridge (no Home app automations required)</div>
      </div>

      <div class="nav">
        <a href="#what">What</a>
        <span class="sep">|</span>
        <a href="#quickstart">Quickstart</a>
        <span class="sep">|</span>
        <a href="#examples">Examples</a>
        <span class="sep">|</span>
        <a href="#safety">Safety</a>
        <span class="sep">|</span>
        <a href="#links">Links</a>
      </div>

      <div class="box">
        <h2 id="what">What This Plugin Does</h2>

        <ul>
          <li>Control existing Homebridge accessories (lights/switches/outlets) from chat</li>
          <li>Schedule one-shot actions ("turn off the lights in 30 minutes")</li>
          <li>LLM-powered health checks, daily monitoring, and watchdog investigations</li>
          <li>Guardrailed self-healing commands and chat-managed runtime skills</li>
          <li>Messaging options: Telegram, ntfy (two-way), Discord webhook (notifications only)</li>
        </ul>

        <div class="note">
          <strong>Important:</strong> this plugin can only control devices that are <em>present in Homebridge</em>.
          If a device is only in the iOS Home app (native HomeKit) and not exposed via a Homebridge plugin, it will
          not appear here.
        </div>
      </div>

      <div class="box">
        <h2 id="quickstart">Quickstart</h2>

        <table class="setup" cellspacing="0" cellpadding="10">
          <tr>
            <th width="220">Option</th>
            <th>How To Set It Up</th>
          </tr>
          <tr>
            <td class="setup-title">
              <strong>ntfy</strong> (recommended)<br />
              <span class="small">Easiest onboarding</span>
            </td>
            <td>
              <ol>
                <li>Enable <code>ntfy.enabled</code> in Homebridge UI for this plugin</li>
                <li>Leave <code>ntfy.topic</code> blank (it will auto-generate)</li>
                <li>Restart Homebridge</li>
                <li>Install the ntfy app (iOS/Android) and subscribe to the topic shown in <code>/status</code> or Homebridge logs</li>
                <li>Send: <code>/hb list</code></li>
              </ol>
            </td>
          </tr>
          <tr>
            <td class="setup-title">
              <strong>Telegram</strong><br />
              <span class="small">Two-way chat</span>
            </td>
            <td>
              <ol>
                <li>Create a bot with <code>@BotFather</code></li>
                <li>Paste the bot token into the plugin settings</li>
                <li>Use pairing mode <em>Auto-link first chat</em> (easiest) and send any message to your bot</li>
                <li>In Telegram: run <code>/setup</code> to configure your LLM provider (API key + model)</li>
              </ol>
            </td>
          </tr>
          <tr>
            <td class="setup-title">
              <strong>Discord webhook</strong><br />
              <span class="small">Notifications only</span>
            </td>
            <td>
              <ol>
                <li>Create a webhook in your Discord channel</li>
                <li>Paste it into <code>discordWebhook.webhookUrl</code></li>
                <li>Restart Homebridge and watch for the "online" notification</li>
              </ol>
            </td>
          </tr>
        </table>
      </div>

      <div class="box">
        <h2 id="examples">Example Commands & Scenarios</h2>

        <h3>Discover Devices</h3>
        <pre><code>/hb status
/hb refresh
/hb list
/hb list lamp</code></pre>

        <h3>Turn Things On/Off</h3>
        <pre><code>/hb on lights
/hb off lights
/hb on switches
/hb off outlets

# direct (LLM can do this too once configured)
turn off all the lights
turn on all the lights</code></pre>

        <h3>Schedule Actions</h3>
        <pre><code>/hb schedule 30m off lights

# natural language
turn off all the lights in 30 minutes</code></pre>

        <h3>Health, Monitoring, Watchdog</h3>
        <pre><code>/health
/watchdog

# enable daily monitoring at 9am
/config set monitoring.dailyMonitoringEnabled true
/config set monitoring.dailyMonitoringTime 09:00</code></pre>

        <h3>Log Signals (Optional)</h3>
        <pre><code>/config set monitoring.includeLogs true
/config set monitoring.logFilePath /var/lib/homebridge/homebridge.log
/health</code></pre>

        <h3>Skills (Safe Shell Command Allowlist)</h3>
        <pre><code>/skills
/skill propose Restart Homebridge | sudo hb-service restart | 60
/skill pending
/skill approve &lt;proposalId&gt; yes
/run &lt;skillId&gt;</code></pre>
      </div>

      <div class="box">
        <h2 id="safety">Safety Notes</h2>
        <ul>
          <li>LLM can control only the accessories discovered from Homebridge.</li>
          <li>Shell commands run only from an allowlist (config commands + approved runtime skills).</li>
          <li>Cooldowns and daily quotas prevent runaway self-healing.</li>
          <li>Keep your messaging tokens private; treat your chat channel as root access.</li>
        </ul>
      </div>

      <div class="box">
        <h2 id="links">Links</h2>
        <ul>
          <li>GitHub repo: <a href="https://github.com/theos2node/homebridge-llm-control">theos2node/homebridge-llm-control</a></li>
          <li>npm package: <a href="https://www.npmjs.com/package/homebridge-llm-control">homebridge-llm-control</a></li>
        </ul>
      </div>

      <div class="footer">
        <div class="small">
          MIT licensed. This page is intentionally simple. If you want the plugin docs, start at the README in the repo.
        </div>
      </div>
    </div>
  </body>
</html>

